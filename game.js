!function(e){"use strict";function n(e){this.newTabCap=!1,this.NEW_TAB_CAP_TIME=500}function h(e){if(e=e||{},this.IS_MASTER=e.isMaster||!1,!this.IS_MASTER)throw new Error("The DataStore can only be instantiated by the Master");this.dataStore={}}function r(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.IS_STANDALONE=e.isStandalone,this.messenger=e.messenger,this.moduleReady=t||!1,this.appTimer=null,this.appDelayMin=1e4,this.appDelayMax=24e4,this.appError=!1,this.appTimerDelay=this.appDelayMax,this.appToken=null,this.token=null}function o(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.IS_STANDALONE=e.isStandalone,this.messenger=e.messenger,this.eventTracking=e.eventTracking,this.appToken=e.appToken,this.moduleReady=t||!1,this.isGamestate=!1,this.endpoint=null,this.spilStorageId=null,this.flushTimer=null,this.flushDelayMin=500,this.flushDelayMax=3e4,this.flushTimerDelay=this.flushDelayMin,this.gameState={started:!1,userId:null,appId:null,dirtyKeys:[]}}function l(e,t){if(this.IS_MASTER=!(!e||!e.isMaster)&&e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.messenger=null,this.subscribers={},this.moduleReady=!!t&&t,this.data=e.data||null,this.gameState="resume",!e||!e.messenger)throw new Error("No messenger passed to the Game module instance");this.messenger=e.messenger,window.addEventListener?window.addEventListener("message",this._performAction.bind(this),!1):window.attachEvent&&window.attachEvent("onmessage",this._performAction.bind(this)),this.IS_MASTER&&this.messenger.subscribe("gameapi.game.adjustHeight",this.adjustHeight,this)}function d(e,t){e=e||{},this.isMaster=e.isMaster,this.isStandalone=e.isStandalone,this.messenger=e.messenger,this.moduleReady=!!t&&t,this.activeLanguage="en"}function p(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_STANDALONE=e.isStandalone,this.messenger=e.messenger,this.eventTracking=e.eventTracking,this.moduleReady=!!t&&t,this.isAvailable=!1,this.locale="",this.loggedIn=!1}function u(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_STANDALONE=e.isStandalone,this.messenger=e.messenger,this.eventTracking=e.eventTracking,this.moduleReady=!!t&&t,this.isAvailable=!1}function c(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.moduleReady=!!t&&t,this.messenger=e.messenger,this.data=e.data||null,this.eventTracking=e.eventTracking,this.initialHeight=e.initialHeight,this.appToken=e.appToken,this.state={userId:null},this._setupMasterEvent()}function g(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.moduleReady=!!t&&t,this.messenger=e.messenger,this.data=e.data||null,this.eventTracking=e.eventTracking,this.initialHeight=e.initialHeight,this.appToken=e.appToken,this._setupMasterEvent(),this.appToken=e.appToken,this.state={userId:null}}function m(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.moduleReady=!!t&&t,this.messenger=e.messenger,this.data=e.data||{mapping:{}},this.eventTracking=e.eventTracking,this._setupMasterEvent()}function t(e,t){e=e||{},this.isMaster=e.isMaster,this.isStandalone=e.isStandalone,this.messenger=e.messenger,this.eventTracking=e.eventTracking,this.moduleReady=!!t&&t,this.timeoutAfter=500,this.timeout=!1,this.adRequested=!1,this.adAvailable=!1,this.gamebreakType="unkown",this.TIMEOUT_REWARD_AVAILABILITY_CONCLUSIVE=2e4,this.isRewardAvailableCallbacks={},this.isRewardAvailableCallbacks.reject=function(){},this.isRewardAvailableCallbacks.accept=function(){},this._callbacks={pause:!1,resume:!1}}function f(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.isStandalone=e.isStandalone,this.messenger=e.messenger,this.eventTracking=e.eventTracking,this.moduleReady=!!t&&t,this.events={GAME_START:"GAME_START",GAME_END:"GAME_END",GAME_PAUSE:"GAME_PAUSE",GAME_CONTINUE:"GAME_CONTINUE",GAME_MUTE:"GAME_MUTE",LEVEL_FAIL:"LEVEL_FAIL",LEVEL_COMPLETE:"LEVEL_COMPLETE"},this._setupEvents()}function i(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.IS_STANDALONE=e.isStandalone,this.data=e.data,this.messenger=e.messenger,this.moduleReady=!!t&&t,this.gamePlayTracking={started:!1,appid:null,host:null,timestamp:null},this.timeInGameTracking={started:!1,appid:null,timestamp:null},this.isGamestate=!1}function a(e,t){e=e||{},this.IS_MASTER=e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.IS_STANDALONE=e.isStandalone,this.eventTracking=e.eventTracking,this.moduleReady=!!t&&t,this.messenger=e.messenger,this.components=e.components,this.data=e.data||null}function y(e){e="string"==typeof e?function(e){var t,i,a,s=!1,n=[];if("string"==typeof e&&"gameapi"===(n=e.split("|"))[0]){n.shift(),t=n.shift(),a=parseInt(n.shift(),10),i=n.join("|");try{s={type:t,callbackId:a,data:""!==i?JSON.parse(i):""}}catch(e){}}return s}(e):e;e&&(this.type=e.type,this.callbackId=e.callbackId,this.data=e.data)}function s(e){e=e||{},this.IS_MASTER="boolean"==typeof e.isMaster&&e.isMaster,this.IS_SLAVE=!this.IS_MASTER,this.api=e.api||{},this._targets=e.targets||[],this._callbacks=[],this._channels=[],this.IS_MASTER&&e.dataStore&&(this.dataStore=e.dataStore),this._setupEventListener()}function S(e,t,i,a,s){window.outerHeight,window.innerHeight,this.version="0.35.21",this.isReady=!1,this._setRole(),this.__={},this.__.dataStore=this.IS_MASTER?new e({isMaster:!0}):null,this.__.messenger=new t({isMaster:this.IS_MASTER,api:this,targets:this._getTargets(),dataStore:this.__.dataStore}),this.__.components=new n;e=this._addBasic({});this.__.EventTracking=new a(e,!1);t=this._addComponents(e),a=this._addEventTracking(t),t=this._addInitialHeight(a);this.AppToken=new r(a,!1),this.GameState=new o(this._addAppToken(a),!1),this.Branding=new i(a,!1),this.GameBreak=new s(a,!1),this.Game=new l(e,!1),this.Award=new g(this._addAppToken(t),!1),this.Secondscreen=new m(t,!1),this.User=new p(a,!1),this.Score=new c(this._addAppToken(t),!1),this.Friends=new u(a,!1),this.GameEvent=new f(a,!1),this.Localization=new d(a,!1)}"bind"in Function.prototype||(Function.prototype.bind=function(e){var t=this;if(arguments.length<=1)return function(){return t.apply(e,arguments)};var i=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,0===arguments.length?i:i.concat(Array.prototype.slice.call(arguments)))}}),"trim"in String.prototype||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){void 0===t&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(var i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1}),"lastIndexOf"in Array.prototype||(Array.prototype.lastIndexOf=function(e,t){for(void 0===t&&(t=this.length-1),t<0&&(t+=this.length),t>this.length-1&&(t=this.length-1),t++;0<t--;)if(t in this&&this[t]===e)return t;return-1}),"forEach"in Array.prototype||(Array.prototype.forEach=function(e,t){for(var i=0,a=this.length;i<a;i++)i in this&&e.call(t,this[i],i,this)}),"map"in Array.prototype||(Array.prototype.map=function(e,t){for(var i=new Array(this.length),a=0,s=this.length;a<s;a++)a in this&&(i[a]=e.call(t,this[a],a,this));return i}),"filter"in Array.prototype||(Array.prototype.filter=function(e,t){for(var i,a=[],s=0,n=this.length;s<n;s++)s in this&&e.call(t,i=this[s],s,this)&&a.push(i);return a}),"every"in Array.prototype||(Array.prototype.every=function(e,t){for(var i=0,a=this.length;i<a;i++)if(i in this&&!e.call(t,this[i],i,this))return!1;return!0}),"some"in Array.prototype||(Array.prototype.some=function(e,t){for(var i=0,a=this.length;i<a;i++)if(i in this&&e.call(t,this[i],i,this))return!0;return!1});var _={timeout:3e3,getGameConfig:function(t){var i=!1,a=setTimeout(function(){i=!0,t()},this.timeout);SpilGames({waiton:"game.info.loaded"},["JSLib"],function(e){i||(clearTimeout(a),e=e.get("current.game.integration.info"),t(e))})},getBrandingConfig:function(e,t){}},v={argsToArray:function(e){return e?Array.prototype.slice.apply(e):[]},isA10:function(){},disableKeys:function(e){var t=e.keyCode;(8===t||9===t||32<=t&&t<=40||46===t)&&e.preventDefault()},trackGA:function(){},getRole:function(e){var t="function"==typeof e.SpilGames,i=e.self!==e.top;return t?"null"===document.getElementById("#iframegame")?{IS_MASTER:!0,IS_SLAVE:!0,IS_STANDALONE:!1}:{IS_MASTER:!0,IS_SLAVE:!1,IS_STANDALONE:!1}:i?(e.onkeydown=this.disableKeys,this.trackGA(),{IS_MASTER:!1,IS_SLAVE:!0,IS_STANDALONE:!1}):(e.onkeydown=this.disableKeys,this.trackGA(),{IS_MASTER:!0,IS_SLAVE:!0,IS_STANDALONE:!0})},submitData:function(e,t,i){var a,e=e||"",t=t||{},s=i||function(){};window.XDomainRequest?((a=new XDomainRequest).onload=function(){s(200,a.responseText)},a.onerror=function(){s(404,null)},a.onprogress=function(){},a.open("POST",e,!0)):window.XMLHttpRequest?(navigator.userAgent.match(/Trident\/7.0;.* rv:11/)?a=this.getJSONP():(a=new XMLHttpRequest).onreadystatechange=function(e){4===a.readyState&&s(a.status,a.responseText)},a.open("POST",e,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")):window.ActiveXObject&&((a=new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(e){4===a.readyState&&s(a.status,a.responseText)},a.open("POST",e,!0)),a.timeout=3e3,a.ontimeout=function(){s(404,null)},a.send(JSON.stringify(t))},getJSONP:function(){var a="",s="jsonpspilgames"+ +new Date,n={open:function(e,t){a=t},onreadystatechange:function(){},setRequestHeader:function(){},set:function(e,t){n.set[e]=t},send:function(e){var t=n.set.callback||0,i=n.set.data||0;(e||t||i)&&(a+=/\?/.test(a)?"&":"?",e&&(a+=i?i+"="+encodeURIComponent(e):e,t&&(a+="&")),t&&(a+=t+"="+s));t=document.createElement("script");t.src=a,document.getElementsByTagName("head")[0].appendChild(t)}};return window[s]=function(){n.onreadystatechange.apply(this,arguments)},n},xdr:function(e,t){function i(){t({isError:!0})}var a,s,n=e.url||"",r=(e.type||"GET").toUpperCase(),o=void 0!==e.data?e.data:{},l=e.headers||{},e=void 0===e.async||e.async;if(XMLHttpRequest){if("withCredentials"in(a=new XMLHttpRequest)){for(s in a.open(r,n,e),a.onerror=i,a.onreadystatechange=function(){4===a.readyState&&t(200<=a.status&&a.status<400?{data:a.responseText,status:a.status}:{isError:!0,status:a.status})},l)l.hasOwnProperty(s)&&a.setRequestHeader(s,l[s]);a.send(o)}}else if(XDomainRequest){for(s in(a=new XDomainRequest).open(r,n),a.onerror=i,a.onload=function(){t(a.responseText)},l)l.hasOwnProperty(s)&&a.setRequestHeader(s,l[s]);a.send(o)}else t({isError:!0,message:"CORS not supported"})},log:function(){var e;window.console&&window.console.log&&(e=Array.prototype.slice.call(arguments),console.log.apply(console,e))},addToken:function(e,t){return e&&(t.auth={token:e}),t},getServiceEndpoint:function(e){},isWrapped:function(){return void 0!==(window.PhoneGap||window.cordova||window.Cordova)}};v.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},v._getQueryString=function(){return window.location.search},v._getPortalHost=function(){return parent!==window?this._getDomainFromReferrer():this._getDomainFromLocation()},v._getDomainFromLocation=function(){return window&&window.location&&window.location.hostname?window.location.hostname:"unknown"},v._getDomainFromReferrer=function(){var e=document.referrer;return this.extractDomain(e)},v.extractDomain=function(e){e=-1<e.indexOf("://")?e.split("/")[2]:e.split("/")[0];return e.split(":")[0]},v.getVariablesFromUrl=function(e){var a={};return"string"==typeof e&&e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){a[t]=i}),a},v.validateSchema=function(e,t){for(var i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i))return{error:"Wrong argument passed: "+i};if(e.hasOwnProperty(i)){var a="object"==typeof e[i]?e[i].type:e[i];if(t[i].constructor.name!==a)return{error:"Wrong value type for "+i+": expected "+e[i]+", got "+t[i].constructor.name};a=e[i]&&e[i].values||[];if(-1===a.indexOf(t[i]))return{error:"Wrong value for "+i+": expected "+a.join(" or ")+", got "+t[i]}}}return{error:!1}};var A={__:{}};A.__.user={getUserId:function(e){var t;if(localStorage)return t=(t=localStorage.getItem("gui"))||"op_"+String(Math.floor(999999999*Math.random())),this.setUserId(t),t},setUserId:function(e){if(!localStorage)return!1;try{localStorage.setItem("gui",e)}catch(e){return!1}return!0}},A.getGameConfig=function(t){var i=this;_.getGameConfig(function(e){t(e||i.getLocalConfig())})},A.getBrandingConfig=function(e,t){_.getBrandingConfig(e,t)},A.getLocalConfig=function(e){e=e&&Object.keys(e).length?e:{portal:{},apiData:{},game:{},branding:{},user:{},localization:{}};var t=this.__.user.getUserId(e),e={isLocal:e.isLocal||!1,apiData:{gameAPIUserId:t},game:{applicationId:e.portal.applicationId||"0",contentarId:e.portal.contentarId||"0",info:e.game.info||{},settings:e.game.objectSettings||{},properties:e.game.properties||{},features:{achievements:e.game.achievements||!1,gameSidePanel:e.game.gameSidePanel||!1,highscores:e.game.highscores||!1,recommendedGames:e.game.recommendedGames||!1}},user:{authenticated:e.user.authenticated||!1,username:e.user.username||"",appToken:e.user.appToken||"",userId:e.user.userId||"",token:e.user.token||""},portal:{host:v._getPortalHost(),siteId:e.portal.siteId||0,channelId:e.portal.channelId||0,applicationId:e.portal.applicationId||"0",gamestate:e.portal.gamestate||!1,env:"stg"===e.portal.env?"stg":"prd",spilStorageId:e.portal.spilStorageId||""},branding:e.branding||{},localization:e.localization||{}};return e.branding.logo=e.branding.logo||{},e.branding.logo.url=e.branding.logo.url||!1,e.branding.logo.image=e.branding.logo.image||!1,e},A.configFromData=function(e){return{game:{applicationId:e.id},user:{userId:e.userid||void 0,appToken:e.appToken||void 0},portal:{applicationId:e.id,siteId:e.site||-1,channelId:e.channel||100,gamestate:!!e.gamestate&&e.gamestate,env:"stg"===e.env?"stg":"prd",spilStorageId:e.spilStorageId}}},A.setupStandaloneMode=function(e,t){var s={};s.JSLib={memory:{},_channels:{},get:function(e){return!!this.memory[e]&&this.memory[e]},set:function(e,t){return this.memory[e]=t},publish:function(e,t){this._channels[e]&&this._channels[e].forEach(function(e){try{e.fn.call(this,t)}catch(e){}})},subscribe:function(e,t){if("function"!=typeof t)throw new Error("Callback has to be a function");if("string"!=typeof e)throw new Error("Channel name has to be a string");this._channels[e]||(this._channels[e]=[]),this._channels[e].push({fn:t})}},s.Net={send:function(e,t){t.call(this,{})}},window.SpilGamesBootstrap=[],window.SpilGames=function(){var e=arguments;if(e[0]&&"string"==typeof e[0])s.JSLib.publish(e[0],e[1]||null);else if(e[0]&&e[0]instanceof Array){for(var t=[],i=0,a=e[0].length;i<a;i++)t.push(s[e[0][i]]);e[1].apply(this,t)}},t.call(this,{isLocal:!0,branding:{main:{label:"main",image:"https://www.gamehome.us/pixel.png",url:"//www.gamehome.us/",style:"",width:"0",height:"0",mime:"image/png",type:"png",handler:"newTab",blacklisted:!0},logo:{label:"logo",image:"https://www.gamehome.us/pixel.png",url:"//www.gamehome.us/",style:"",width:"0",height:"0",mime:"image/png",type:"png",handler:"newTab",blacklisted:!1},more_games:{label:"more_games",image:null,url:"//www.gamehome.us/",style:"",width:null,height:null,mime:null,type:null,handler:"newTab",blacklisted:!1},splash_screen:{label:"splash_screen",image:"place_holder_string",url:"//www.gamehome.us/",style:"",width:"0",height:"0",mime:"image/png",type:"png",handler:"newTab",blacklisted:!1}}})},A.getCachedConfig=function(){},n.prototype.newTab=function(e){if(!this.newTabCap){var t=this,e=e.url,e=window.open(e,"_blank");return t.newTabCap=!0,setTimeout(function(){t.newTabCap=!1},t.NEW_TAB_CAP_TIME),e&&e.focus(),e}},n.prototype.moreGames=function(e){var t=e.brandName||"a10";e.isStandalone?this.newTab(e):e.messenger&&e.messenger.post&&e.messenger.post("game.moregames",{branding:t})},n.prototype.displayOnTop=function(e){if(void 0===e||void 0===e.url||"string"!=typeof e.url||void 0===e.action||"function"!=typeof e.action)return void 0!==e.callback||"function"==typeof e.callback?void e.callback():void 0;var t=document.createElement("div"),i=e.url,a=e.action,s=e.callback;t.setAttribute("id","spilgames-splash-screen-sample"),document.body.appendChild(t);var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return t.style.left="0",t.style.top="0",t.style.width=n+"px",t.style.height=e+"px",t.style.display="none",t.style.zIndex="10000",t.onclick=a,i&&(t.style.background="url('"+i+"') center center no-repeat #FFF"),window.setTimeout(function(){var e=document.getElementById("spilgames-splash-screen-sample");e.parentNode.removeChild(e),s&&s()},0),t},h.prototype.get=function(e){for(var t=this.dataStore,i=e.split("."),a=i.length,s=0;s<a-1;s++){if(!t[i[s]])return null;t=t[i[s]]}return t[i[a-1]]||null},h.prototype.put=function(e,t){for(var i=this.dataStore,a=e.split("."),s=a.length,n=0;n<s-1;n++){var r=a[n];i[r]||(i[r]={}),i=i[r]}i[a[s-1]]=t},h.prototype.set=function(e,t){this.put(e,t);var i=Date.parse(new Date);return this.notify({type:"new",key:e,current:t,previous:null,timestamp:i}),t},h.prototype.update=function(e,t){var i,a,s=null;return this.get(e)?(i="update",s=this.get(e)):i="new",this.put(e,t),a=Date.parse(new Date),this.notify({type:i,key:e,current:t,previous:s,timestamp:a}),t},h.prototype.remove=function(e){if(this.get(e)){var t,i=this.get(e);return this.put(e,null),t=Date.parse(new Date),this.notify({type:"remove",key:e,current:null,previous:i,timestamp:t}),!0}return!1},h.prototype._setCache=function(e){this.dataStore=e},h.prototype._getCache=function(){return this.dataStore},h.prototype.notify=function(e){if(this.IS_MASTER){e=new y({type:"datachange",callbackId:null,data:e}).encode();return window.postMessage(e,"*"),e}},r.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this.data&&this.data.game&&this.data.user&&(this.appId=this.data.game.applicationId||null,this.appToken=this.data.user.appToken||null,this.token=this.data.user.token||null),this._setupEvents(),this.appToken||this._getAppToken(),(this.IS_SLAVE||this.IS_STANDALONE||v.isWrapped())&&this._scheduleRefresh()},r.prototype.getAppToken=function(){return this.appToken},r.prototype._setupEvents=function(){this.IS_MASTER?this.messenger.subscribe("gameapi.apptoken.getAppToken",this._getAppToken,this):this.messenger.subscribe("gameapi.apptoken.getAppTokenResponse",this._getAppTokenResponse,this)},r.prototype._retryAppToken=function(e){!e&&this.appTimerDelay===this.appDelayMax||(e&&!this.appError&&(this.appTimerDelay=this.appDelayMin,this.appError=!0),this._unschedule(),e?this._increaseDelay():this._resetDelay(),this._scheduleRefresh())},r.prototype._scheduleRefresh=function(){var e=this;null===this.appTimer&&(this.appTimer=setInterval(function(){e._getAppToken()},this.appTimerDelay))},r.prototype._unschedule=function(){this.appTimer&&clearTimeout(this.appTimer),this.appTimer=null},r.prototype._increaseDelay=function(){this.appTimerDelay=Math.min(2*this.appTimerDelay,this.appDelayMax)},r.prototype._resetDelay=function(){this.appTimerDelay=this.appDelayMax},r.prototype._getAppToken=function(){var t=this.messenger,i=this;if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this.IS_MASTER||this.messenger._postMessage({},void 0,"gameapi.apptoken.getAppToken"),this.IS_MASTER&&("function"==typeof SpilGames?SpilGames("api.account.getApplicationToken",v.addToken(this.token,{cache:!1,applicationId:this.appId}),function(e){e.error||!e.appAuth.token?t._postMessage({},void 0,"gameapi.apptoken.getAppTokenResponse"):(i.appToken=e.appAuth.token,t._postMessage({appToken:e.appAuth.token,level:e.level},void 0,"gameapi.apptoken.getAppTokenResponse"))}):t._postMessage({},void 0,"gameapi.apptoken.getAppTokenResponse"))},r.prototype._getAppTokenResponse=function(e){e.appToken?(this.appToken=e.appToken,this._retryAppToken(!1)):this._retryAppToken(!0)},o.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this.data&&this.data.game&&this.data.user&&this.data.portal&&(this.gameState.appId=this.data.game.applicationId||null,this.gameState.userId=this.data.user.userId||null,this.isGamestate=this.data.portal.gamestate||!1,this.endpoint=v.getServiceEndpoint(this.data.portal.env),this.spilStorageId=this.data.portal.spilStorageId),this.isGamestate&&(this.IS_SLAVE||this.IS_STANDALONE||v.isWrapped())&&(this.listenStorageEvents(),this.preloadGameState())},o.prototype.listenStorageEvents=function(){var e=function(e){this.onStorageEvent(e)}.bind(this);window.addEventListener("storage",e,!1)},o.prototype.flagDirtyKey=function(e){-1===this.gameState.dirtyKeys.indexOf(e)&&(this.gameState.dirtyKeys.push(e),this.scheduleSyncState())},o.prototype.unschedule=function(){this.flushTimer&&clearTimeout(this.flushTimer),this.flushTimer=null},o.prototype.scheduleSyncState=function(){var e=this;null===this.flushTimer&&(this.flushTimer=setInterval(function(){e.syncState()},this.flushTimerDelay))},o.prototype.increaseDelaySyncState=function(){this.flushTimerDelay=Math.min(2*this.flushTimerDelay,this.flushDelayMax)},o.prototype.resetDelaySyncState=function(){this.flushTimerDelay=this.flushDelayMin},o.prototype.onStorageEvent=function(e){e&&e.url&&0<e.url.indexOf("spilStorageId="+this.spilStorageId)&&this.flagDirtyKey(e.key)},o.prototype.preloadGameState=function(){var e={url:this.endpoint+"/v1/gamestate/"+this.gameState.userId+"/"+this.gameState.appId,type:"GET",dataType:"JSON",headers:{"x-auth-token":this.appToken.getAppToken()}};v.xdr(e,function(e){if(e.isError)v.log("GameAPIGameState failed preloading: "+e.status);else{e=JSON.parse(e.data);if(e&&e.gamestate){var t=e.gamestate,i=0,a=null;for(a in t)t.hasOwnProperty(a)&&(window.localStorage[a]=t[a],i++);v.log("GameAPIGameState preloaded: "+i+" keys")}}})},o.prototype.retrySyncState=function(e){v.log(e),this.increaseDelaySyncState(),this.scheduleSyncState()},o.prototype.syncState=function(){if(this.unschedule(),!this.gameState.appId)return this.retrySyncState("GameAPIGameState.prototype.syncStat no appId");if(!this.gameState.userId)return this.retrySyncState("GameAPIGameState.prototype.syncState no userId");for(var e,t=this.gameState.appId,i=this.gameState.userId,a=this.gameState.dirtyKeys,s={set:{},remove:[]},n=0,r=this,o=0;o<a.length;o++)void 0===(e=window.localStorage[a[o]])?s.remove.push(a[o]):(s.set[a[o]]=e,n=Math.max(e.length,n));return 0<a.length&&(t={url:this.endpoint+"/v1/gamestate/"+i+"/"+t,type:"POST",data:JSON.stringify(s),async:!0,headers:{"x-auth-token":this.appToken.getAppToken()}},v.xdr(t,function(e){e.isError?r.retrySyncState("GameAPIGameState error syncing state"):(v.log("GameAPIGameState synced "+a.length+" keys"),r.resetDelaySyncState(),r.gameState.dirtyKeys=[])}),i={numkeys:a.length,maxdatalength:n,userid:i},this.eventTracking.trackGameAPIEvent("gameState",i)),!0},l.prototype.init=function(e){this.data=e.data||null},l.prototype._performAction=function(e){var t=new y(e.data||{}),i=this.messenger,a=this.subscribers||{};if(t&&t.type&&t.data)switch(t.type){case"gameEvent":t.data[0]&&a[t.data[0]]&&0<a[t.data[0]].length?a[t.data[0]].forEach(function(e){e.call(this),i._postMessage([t.data[0],{origin:"slave"},null],null,"gameState")}):t.data[0]&&t.data[1]&&"slave"===t.data[1].origin&&"function"==typeof SWFtoJS&&SWFtoJS({call:t.data[0],params:{}});break;case"gameState":t.data[0]&&t.data[1]&&"slave"===t.data[1].origin&&(this.gameState=t.data[0])}},l.prototype.on=function(e,t){this.IS_SLAVE&&(this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push(t))},l.prototype.emit=function(e){if(!this.IS_MASTER)throw new Error("Only the master environment can emit game events");if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");if(e===this.gameState)throw new Error("The game is already in state: `"+e+"`");this.messenger._postMessage([e,{origin:"master"},null],null,"gameEvent")},l.prototype.isSiteLock=function(){var e=!1;if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");var t=v.getVariablesFromUrl(window.location.href);return void 0!==this.data&&void 0!==this.data.portal&&void 0!==this.data.portal.siteId&&this.data.portal.siteId<0&&(void 0===t||void 0===t.siteid||void 0===t.channelid)&&(e=!0),e},l.prototype.adjustHeight=function(e){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this.IS_MASTER?"function"==typeof SpilGames&&void 0!==SpilGames.Events&&"function"==typeof SpilGames.Events.publish&&SpilGames.Events.publish("portal.adjustheight",{height:e,onsuccess:function(){}}):(this.messenger._postMessage(e,void 0,"gameapi.game.adjustHeight"),this.messenger._postMessage(["log.gameapi.game.adjustHeight",{origin:"slave",height:e},null],null,"log"))},d.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this._setupEvents()},d.prototype._setupEvents=function(){this.isMaster||this.messenger.subscribe("gameapi.locale.change",this._localeChange,this)},d.prototype._localeChange=function(e){this.activeLanguage=e},d.prototype.changeLocale=function(e){this.isMaster&&this.messenger._postMessage(e,void 0,"gameapi.locale.change")},d.prototype.getLocalizedText=function(e,t){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");var i=e;return this.data&&this.data.localization[this.activeLanguage]&&this.data.localization[this.activeLanguage][e]&&this.data.localization[this.activeLanguage][e].id&&this.data.localization[this.activeLanguage][e].id===t&&(i=this.data.localization[this.activeLanguage][e].text),i},p.prototype.init=function(e){this._setLocale(e),this._setupEvents(),e&&e.data&&e.data.portal&&e.data.portal.siteId&&e.data.portal.siteId<500&&"0"!==e.data.portal.siteId&&(this.isAvailable=!0)},p.prototype._setupEvents=function(){this.IS_MASTER?(this.messenger.subscribe("gameapi.user.forceAuthentication",this.forceAuthentication,this),this.messenger.subscribe("gameapi.user.getUser",this.getUser,this),this.messenger.subscribe("gameapi.user.login",this.login,this)):(this.messenger.subscribe("gameapi.user.loginResponse",this._loginResponse,this),this.messenger.subscribe("gameapi.user.getUserResponse",this._getUserResponse,this))},p.prototype.login=function(t,e){var i=this.messenger;t=t||{},this.logincallback=e,this.IS_MASTER?SpilGames("api.auth.getToken",{context:{channelid:100,siteid:2}},function(e){SpilGames("api.auth.login",{auth:{token:e.auth.token},login:t.username,password:t.password},function(e){i._postMessage(e,void 0,"gameapi.user.loginResponse")})}):((e={}).username=t.username||"",e.password=t.password||"",i._postMessage(e,void 0,"gameapi.user.login"))},p.prototype._loginResponse=function(e){var t={success:!1};e.auth&&e.auth.token&&(this.loggedIn=!0,this.token=e.auth.token,t.success=!0),this.logincallback(t),this.logincallback=function(){}},p.prototype.forceAuthentication=function(){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this.IS_MASTER?"function"==typeof SpilGames&&void 0!==SpilGames.Portal&&"function"==typeof SpilGames.Portal.forceAuthentication&&SpilGames.Portal.forceAuthentication({onsuccess:function(){}}):(this.messenger._postMessage({},void 0,"gameapi.user.forceAuthentication"),this.messenger._postMessage(["log.gameapi.user.forceAuthentication",{origin:"slave"},null],null,"log"))},p.prototype.getUser=function(e){var t=this.messenger;if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");if(this.IS_MASTER)"function"==typeof SpilGames?this.isAvailable?SpilGames(["JSLib"],function(e){e&&"function"==typeof e?e("api.user.getExtended",function(e){t._postMessage(e,void 0,"gameapi.user.getUserResponse")}):t._postMessage({userInfoExtended:{}},void 0,"gameapi.user.getUserResponse")}):this.loggedIn?SpilGames("api.user.getExtended",{auth:{token:this.token},context:{channelid:100,siteid:2}},function(e){t._postMessage(e,void 0,"gameapi.user.getUserResponse")}):t._postMessage({userInfoExtended:{}},void 0,"gameapi.user.getUserResponse"):t._postMessage({userInfoExtended:{}},void 0,"gameapi.user.getUserResponse");else{if("function"!=typeof e)throw new Error("The argument passed to the GameAPI.User.getUser method should be a function");this.usercallback=e,t._postMessage({},void 0,"gameapi.user.getUser"),t._postMessage(["log.gameapi.user.getUser",{origin:"slave",argumentType:typeof e},null],null,"log")}},p.prototype._getUserResponse=function(e){var t=e.userInfoExtended||{},e=this._validateData(t),t=""===t.guid?!0:!1;this.eventTracking.trackGameAPIEvent("userGet",{guid:e.guid||"",fail:t}),this.usercallback(e)},p.prototype._validateData=function(e){return{uid:e.uid||"",guid:e.guid||"",displayName:e.name||"",pic_square:e.avatarUrl||"",pic_square_large:e.avatarLargeUrl||"",gender:e.gender||"",age:e.age||"",birthday:e.birthdate||"",level:e.level||"",locale:this.locale||""}},p.prototype._setLocale=function(e){e&&e.data&&e.data.portal&&e.data.portal.siteId&&(this.locale=this._getLang(e.data.portal.siteId))},p.prototype._getLang=function(e){for(var t=[{siteid:1,lang:"nl-NL"},{siteid:2,lang:"en-US"},{siteid:5,lang:"de-DE"},{siteid:11,lang:"fr-FR"},{siteid:12,lang:"fr-FR"},{siteid:15,lang:"it-IT"},{siteid:16,lang:"pl-PL"},{siteid:24,lang:"en-US"},{siteid:25,lang:"nl-NL"},{siteid:26,lang:"de-DE"},{siteid:44,lang:"sv-SE"},{siteid:50,lang:"pt-BR"},{siteid:55,lang:"en-ID"},{siteid:79,lang:"en-US"},{siteid:86,lang:"es-ES"},{siteid:87,lang:"pt-BR"},{siteid:88,lang:"en-US"},{siteid:90,lang:"en-US"},{siteid:91,lang:"pt-BR"},{siteid:92,lang:"en-GB"},{siteid:93,lang:"nl-NL"},{siteid:94,lang:"de-DE"},{siteid:95,lang:"fr-FR"},{siteid:96,lang:"es-ES"},{siteid:97,lang:"es-ES"},{siteid:98,lang:"pl-PL"},{siteid:99,lang:"it-IT"},{siteid:100,lang:"sv-SE"},{siteid:101,lang:"pt-BR"},{siteid:102,lang:"en-GB"},{siteid:103,lang:"ru-RU"},{siteid:104,lang:"ru-RU"},{siteid:105,lang:"ru-RU"},{siteid:106,lang:"it-IT"},{siteid:107,lang:"en-GB"},{siteid:108,lang:"sv-SE"},{siteid:109,lang:"pl-PL"},{siteid:115,lang:"en-GB"},{siteid:116,lang:"tr-TR"},{siteid:118,lang:"ms-MY"},{siteid:119,lang:"en-GB"},{siteid:120,lang:"jp-JP"},{siteid:121,lang:"en-US"},{siteid:122,lang:"es-ES"},{siteid:123,lang:"en-US"},{siteid:124,lang:"en-US"},{siteid:125,lang:"AR"},{siteid:126,lang:"en-US"},{siteid:127,lang:"en-US"},{siteid:128,lang:"nl-NL"},{siteid:129,lang:"es-AR"},{siteid:130,lang:"es-MX"},{siteid:131,lang:"de-DE"},{siteid:132,lang:"en-EN"},{siteid:133,lang:"en-EN"},{siteid:134,lang:"en-ID"},{siteid:135,lang:"de-DE"},{siteid:136,lang:"pl-PL"},{siteid:137,lang:"en-EN"},{siteid:138,lang:"it-IT"},{siteid:139,lang:"uk-UA"},{siteid:140,lang:"en-ID"},{siteid:141,lang:"uk-UA"},{siteid:142,lang:"ja-JP"},{siteid:143,lang:"nl-NL"},{siteid:144,lang:"en-US"},{siteid:145,lang:"en-US"},{siteid:146,lang:"en-US"},{siteid:147,lang:"en-US"},{siteid:148,lang:"en-US"},{siteid:149,lang:"en-IN"},{siteid:150,lang:"tr-TR"},{siteid:151,lang:"de-DE"},{siteid:152,lang:"ru-RU"},{siteid:153,lang:"ru-RU"},{siteid:154,lang:"ru-RU"},{siteid:155,lang:"en-US"},{siteid:156,lang:"tr-TR"},{siteid:157,lang:"tr-TR"},{siteid:158,lang:"tr-TR"},{siteid:159,lang:"en-US"},{siteid:160,lang:"en-US"},{siteid:161,lang:"en-US"},{siteid:162,lang:"en-US"},{siteid:163,lang:"en-US"},{siteid:164,lang:"en-US"},{siteid:165,lang:"en-US"},{siteid:166,lang:"en-US"},{siteid:167,lang:"en-US"},{siteid:168,lang:"en-US"},{siteid:169,lang:"en-US"},{siteid:170,lang:"en-US"},{siteid:171,lang:"en-US"},{siteid:172,lang:"en-US"},{siteid:173,lang:"en-US"},{siteid:174,lang:"en-US"},{siteid:175,lang:"en-US"},{siteid:176,lang:"en-US"},{siteid:177,lang:"en-US"},{siteid:178,lang:"en-US"},{siteid:179,lang:"en-US"},{siteid:180,lang:"en-UK"},{siteid:181,lang:"nl-NL"},{siteid:182,lang:"fr-FR"},{siteid:183,lang:"de-DE"},{siteid:184,lang:"en-US"},{siteid:185,lang:"en-US"},{siteid:186,lang:"en-EN"},{siteid:187,lang:"en-EN"},{siteid:188,lang:"en-EN"},{siteid:189,lang:"en-EN"},{siteid:190,lang:"en-EN"},{siteid:191,lang:"en-US"},{siteid:192,lang:"pt-BR"},{siteid:193,lang:"en-US"},{siteid:450,lang:"en-US"},{siteid:451,lang:"nl-NL"},{siteid:452,lang:"de-DE"},{siteid:453,lang:"fr-FR"},{siteid:454,lang:"es-ES"},{siteid:455,lang:"it-IT"},{siteid:456,lang:"en-GB"},{siteid:457,lang:"en-ID"},{siteid:458,lang:"es-AR"},{siteid:459,lang:"es-LA"},{siteid:460,lang:"es-MX"},{siteid:461,lang:"jp-JP"},{siteid:462,lang:"ms-MY"},{siteid:463,lang:"pl-PL"},{siteid:464,lang:"pt-BR"},{siteid:465,lang:"pt-PT"},{siteid:466,lang:"ru-RU"},{siteid:467,lang:"sv-SE"},{siteid:468,lang:"tr-TR"}],i=0;i<t.length;i++)if(t[i].siteid===e)return t[i].lang;return""},u.prototype.init=function(e){this._setupEvents(),e&&e.data&&e.data.portal&&e.data.portal.siteId&&e.data.portal.siteId<500&&"0"!==e.data.portal.siteId&&(this.isAvailable=!0)},u.prototype._setupEvents=function(){this.IS_MASTER?(this.messenger.subscribe("gameapi.friends.showInvite",this.showInvite,this),this.messenger.subscribe("gameapi.friends.getFriends",this.getFriends,this)):this.messenger.subscribe("gameapi.friends.getFriendsResponse",this._getFriendsResponse,this)},u.prototype.showInvite=function(e){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this.IS_MASTER?"function"==typeof SpilGames&&void 0!==SpilGames.Events&&"function"==typeof SpilGames.Events.publish&&SpilGames.Events.publish("invitefriends.request"):(this.messenger._postMessage({},void 0,"gameapi.friends.showInvite"),this.messenger._postMessage(["log.gameapi.friends.showInvite",{origin:"slave"},null],null,"log"),this.eventTracking.trackGameAPIEvent("friendsInvite",{guid:this.guid||""}))},u.prototype.getFriends=function(e){var t,i=this.messenger;if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this.IS_MASTER?"function"==typeof SpilGames&&(t=this,SpilGames(["JSLib"],function(e){e&&"function"==typeof e?e("api.user.getExtended",function(e){e.userInfoExtended&&"guest"!==e.userInfoExtended.name&&e.userInfoExtended.guid?(this.userGuid=e.userInfoExtended.guid,t._getFriendsFromPortal([],1)):i._postMessage({friendList:{}},void 0,"gameapi.friends.getFriendsResponse")}):i._postMessage({friendList:{}},void 0,"gameapi.friends.getFriendsResponse")})):("function"==typeof e&&(this.friendscallback=e),i._postMessage({},void 0,"gameapi.friends.getFriends"),i._postMessage(["log.gameapi.friends.getFriends",{origin:"slave"},null],null,"log"))},u.prototype._getFriendsFromPortal=function(e,t){var i,a=this.messenger,s=e;"function"==typeof SpilGames?SpilGames("api.friend.list",{guid:(i=this).userGuid,pageControl:{page:t,pageSize:500}},function(e){e.error?a._postMessage(s,void 0,"gameapi.friends.getFriendsResponse"):(s=s.concat(e.friendList),e.pageControl&&e.pageControl.totalPages>t?i._getFriendsFromPortal(s,t+1):a._postMessage({friendList:s},void 0,"gameapi.friends.getFriendsResponse"))}):a._postMessage({friendList:e},void 0,"gameapi.friends.getFriendsResponse")},u.prototype._getFriendsResponse=function(e){var t=this._validateData(e.friendList),e=!1;0===t.length&&(e=!0),this.eventTracking.trackGameAPIEvent("friendsGet",{guid:this.guid||"",fail:e}),this.friendscallback(t)},u.prototype._validateData=function(e){for(var t=[],i=0;i<e.length;i++){var a={uid:e[i].uid||"",guid:e[i].guid||"",displayName:e[i].name||"",pic_square:e[i].avatarUrl||"",pic_square_large:e[i].avatarLargeUrl||"",gender:e[i].gender||"",age:e[i].age||""};t.push(a)}return t},c.prototype.init=function(e){var t=this;e=e||{},this.data=e.data||this.data,this.data&&this.data.user&&this.data.user.userId?this.state.userId=this.data.user.userId:"function"==typeof SpilGames&&SpilGames("api.user.get",function(e){t.state.userId=e.userInfo.guid||null})},c.prototype._setupMasterEvent=function(){this.IS_MASTER&&this.messenger.subscribe("gameapi.score",this.submit,this)},c.prototype._obfuscateScore=function(e){var t=2166136261,i=e.length,a=0;if(!i)return t;for(;a<i;++a)t^=e.charCodeAt(a),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},c.prototype.submit=function(e){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");var t,i,a;return this.IS_MASTER?this.data&&this.data.portal&&this.data.portal.siteId&&this.data.portal.siteId<500&&0<this.data.portal.siteId&&(t=!1,i=window.outerHeight-window.innerHeight,a="",this.appToken&&(a=this.appToken.getAppToken()),i===this.initialHeight&&(t=!0),this.eventTracking.trackGameAPIEvent("scoreSubmit",{score:e,initialheight:this.initialHeight,submitheight:i,equals:t,os:this._obfuscateScore(""+e),guid:this.state.userId,apptoken:a}),"function"==typeof SWFtoJS&&SWFtoJS({call:"UPDATE_HIGHSCORE",params:{score:e}})):(this.messenger._postMessage(e,void 0,"gameapi.score"),this.messenger._postMessage(["log.gameapi.score.submit",{origin:"slave",score:e},null],null,"log")),{success:!0,value:e}},g.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this.data&&this.data.user&&(this.state.userId=this.data.user.userId||null)},g.prototype._setupMasterEvent=function(){this.IS_MASTER&&this.messenger.subscribe("gameapi.award",this.submit,this)},g.prototype.submit=function(e){var t,i,a=e.award||"";if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");return this.IS_MASTER?this.data&&this.data.portal&&this.data.portal.siteId&&this.data.portal.siteId<500&&0<this.data.portal.siteId&&(t=!1,i="",this.appToken&&(i=this.appToken.getAppToken()),window.outerHeight-window.innerHeight===this.initialHeight&&(t=!0),this.eventTracking.trackGameAPIEvent("awardSubmit",{award:a,initialheight:this.initialHeight,submitheight:window.outerHeight-window.innerHeight,equals:t,guid:this.state.userId,apptoken:i})):(this.messenger._postMessage(e,void 0,"gameapi.award"),this.messenger._postMessage(["log.gameapi.award.submit",{origin:"slave",award:a},null],null,"log")),{success:!0,value:e.award}},m.prototype.init=function(e){e=e||{},this.data=e.data||this.data},m.prototype._setupMasterEvent=function(){var e=this.IS_MASTER?this._masterHandler:this._slaveHandler;this.messenger.subscribe("gameapi.secondscreen",e,this)},m.prototype._masterHandler=function(t){window.SpilGames&&SpilGames(["SWPEvent"],function(e){e.emit("system.game.secondscreen",t)})},m.prototype._slaveHandler=function(e){e.event&&this._handleClientEvent(e.event)},m.prototype._dispatchEvent=function(e){var t,i=document.createEvent("Event");for(t in i.initEvent(e.name,!0,!0),e.properties)e.properties.hasOwnProperty(t)&&(i[t]=e.properties[t]);document.body.dispatchEvent(i)},m.prototype._handleClientEvent=function(e){var t=this.data.mapping;t[e.id]&&t[e.id][e.type]&&((e=t[e.id][e.type]).properties||(e.properties={}),e.function&&(e=e.function(e)),e&&e.name&&this._dispatchEvent(e))},m.prototype.relayClientEvents=function(e){this.IS_MASTER&&this.messenger._postMessage({event:e},void 0,"gameapi.secondscreen")},m.prototype.updateControls=function(e,t){this.IS_MASTER||(this.data.mapping=t||{},this.messenger._postMessage({controls:e},void 0,"gameapi.secondscreen"))},t.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this._setupEvents(),this.messenger._postMessage(!0,void 0,"gameapi.gamebreak.checkavailable")},t.prototype._setupEvents=function(){var t;this.isMaster?(t=this,SpilGames(["JSLib"],function(e){t._setupJSLibGameBreakFlow(e,"midroll","ad.request.accepted","game.ad.accepted"),t._setupJSLibGameBreakFlow(e,"reward","adreward.request.accepted","game.adreward.accepted"),e.subscribe("ad.complete",function(e){t.messenger._postMessage(e,void 0,"ad.complete")})}),this.messenger.subscribe("gameapi.ad.request",this._setupAd,this),this.messenger.subscribe("game.ad.request",this._triggerAd,this),this.messenger.subscribe("gameapi.adreward.request",this._setupAd,this),this.messenger.subscribe("gameapi.adreward.request",this._triggerAdreward,this),this.messenger.subscribe("game.force.break",this._forceGamebreak,this),this.messenger.subscribe("gameapi.gamebreak.checkavailable",this._checkAvailable,this),this.messenger.subscribe("gameapi.gamebreak.checkrewardavailable",this._checkRewardAvailable,this)):(this.messenger.subscribe("ad.request.accepted",this._onAdAccepted,this),this.messenger.subscribe("adreward.request.accepted",this._onRewardAccepted,this),this.messenger.subscribe("ad.complete",this._onAdCompleted,this),this.messenger.subscribe("gameapi.gamebreak.checkavailableresponse",this._checkAvailableResponse,this))},t.prototype._setupJSLibGameBreakFlow=function(e,t,i,a){var s=this;e.subscribe(i,function(e){s.eventTracking.trackGameAPIEvent("gamebreakAccepted",{gamebreakType:t,response:e}),!0===e&&s.adRequested&&(s.adRequested=!1,SpilGames(a,!0),s.messenger._postMessage(!0,void 0,i))})},t.prototype._setupAd=function(){this.adRequested=!0},t.prototype._checkAvailable=function(){this.isMaster&&document.getElementById("sgAdOgGp300x250")?this.messenger._postMessage(!0,void 0,"gameapi.gamebreak.checkavailableresponse"):this.messenger._postMessage(!1,void 0,"gameapi.gamebreak.checkavailableresponse")},t.prototype._checkAvailableResponse=function(e){this.isMaster||this.isStandalone||(this.adAvailable=e)},t.prototype._triggerAd=function(){SpilGames("game.ad.request")},t.prototype._triggerAdreward=function(){SpilGames("game.adreward.request")},t.prototype._forceGamebreak=function(){SpilGames("game.ad.accepted",!0)},t.prototype._runCallback=function(e,t){this._callbacks[e]&&(this._callbacks[e](t),this._callbacks[e]=!1)},t.prototype.isAvailable=function(){return!1},t.prototype._checkRewardAvailable=function(){var t,i=this,a="adreward.requestavailability.conclusive",s=function(e){SpilGames&&SpilGames(["JSLib"],function(e){e.unsubscribe(a,s)}),t&&(clearTimeout(t),t=null),i.messenger._postMessage(e,void 0,"gameapi.gamebreak.checkrewardavailableresponse")};i.isMaster||i.messenger._postMessage({available:!1},void 0,"gameapi.gamebreak.checkrewardavailableresponse"),t=setTimeout(function(){s({available:!1})},i.TIMEOUT_REWARD_AVAILABILITY_CONCLUSIVE),SpilGames&&(SpilGames(["JSLib"],function(e){e.subscribe(a,s)}),SpilGames("game.adreward.requestavailability"))},t.prototype._checkRewardAvailableResponse=function(e){this.isRewardAvailableCallbacks.timeoutHandle&&(clearTimeout(this.isRewardAvailableCallbacks.timeoutHandle),this.isRewardAvailableCallbacks.timeoutHandle=null),this.messenger.unsubscribe("gameapi.gamebreak.checkrewardavailableresponse",this._checkRewardAvailableResponse,this),e.available?this.isRewardAvailableCallbacks.accept():this.isRewardAvailableCallbacks.reject(),this.isRewardAvailableCallbacks.reject=function(){},this.isRewardAvailableCallbacks.accept=function(){}},t.prototype.isRewardAvailable=function(){var i=this,e=new Promise(function(e,t){return i.isRewardAvailableCallbacks.accept=e,i.isRewardAvailableCallbacks.reject=t,!i.adAvailable||i.isMaster?void t():void(i.isRewardAvailableCallbacks.timeoutHandle=setTimeout(function(){i._checkRewardAvailableResponse({available:!1})},i.TIMEOUT_REWARD_AVAILABILITY_CONCLUSIVE))});return i.messenger.subscribe("gameapi.gamebreak.checkrewardavailableresponse",i._checkRewardAvailableResponse,i),i.messenger._postMessage(void 0,void 0,"gameapi.gamebreak.checkrewardavailable"),e},t.prototype.reward=function(e,t){var i=this;if("function"!=typeof e)throw new Error("pauseGame argument should be a function");if("function"!=typeof t)throw new Error("resumeGame argument should be a function");if(!i.moduleReady)throw new Error("This method cannot be called before the API is loaded");return i._callbacks.pause=e,i._callbacks.resume=t,this.gamebreakType="reward",this.isMaster?void i._runCallback("resume",{completed:!1}):(i.messenger._postMessage(void 0,void 0,"gameapi.adreward.request"),i.messenger._postMessage(["log.gameapi.adreward.requested",{origin:"slave"},null],null,"log"),this.eventTracking.trackGameAPIEvent("gamebreakRequest",{gamebreakType:"reward"}),void(this.timeout=setTimeout(function(){i._requestTimeout(),i.eventTracking.trackGameAPIEvent("gamebreakTimeout",{gamebreakType:"reward"})},this.timeoutAfter)))},t.prototype.request=function(e,t){var i=this;if("function"!=typeof e)throw new Error("pauseGame argument should be a function");if("function"!=typeof t)throw new Error("resumeGame argument should be a function");if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this._callbacks.pause=e,this._callbacks.resume=t,this.gamebreakType="midroll",this.isMaster||(this.messenger._postMessage(void 0,void 0,"gameapi.ad.request"),this.messenger._postMessage(["log.gameapi.ad.requested",{origin:"slave"},null],null,"log"),this.eventTracking.trackGameAPIEvent("gamebreakRequest",{gamebreakType:"midroll"})),this.messenger._postMessage(void 0,void 0,"game.ad.request"),this.timeout=setTimeout(function(){i._requestTimeout(),i.eventTracking.trackGameAPIEvent("gamebreakTimeout",{gamebreakType:"midroll"})},this.timeoutAfter)},t.prototype._onAdAccepted=function(e){var t=this.messenger;this.timeout&&clearTimeout(this.timeout),!this.isMaster&&e&&(t._postMessage(["log.gameapi.ad.start",{origin:"slave"},null],null,"log"),this._runCallback("pause"))},t.prototype._onRewardAccepted=function(e){var t=this.messenger;this.timeout&&clearTimeout(this.timeout),!this.isMaster&&e&&(t._postMessage(["log.gameapi.adreward.start",{origin:"slave"},null],null,"log"),this._runCallback("pause"))},t.prototype._onAdCompleted=function(e){var t=this.messenger,e=!(!e||!e.completed)&&e.completed;this.isMaster||t._postMessage(["log.gameapi.ad.complete",{origin:"slave",completed:e},null],null,"log"),this.eventTracking.trackGameAPIEvent("gamebreakComplete",{gamebreakType:this.gamebreakType,adSuccess:e}),this.gamebreakType="unknown",this._runCallback("resume",{completed:e})},t.prototype._requestTimeout=function(e){this._onAdCompleted({completed:!1})},f.prototype._setupEvents=function(){this.IS_MASTER&&this.messenger.subscribe("gameapi.gameevent",this.emit,this)},f.prototype._validateEvent=function(e){var t=!1;return this.events[e]&&void 0!==this.events[e]&&(t=!0),t},f.prototype.emit=function(e,t){if(!this.moduleReady)throw new Error("This method cannot be called before the API is loaded");this._validateEvent(e)?this.IS_MASTER?"function"==typeof SWFtoJS&&SWFtoJS({call:e}):(this.messenger._postMessage(e,void 0,"gameapi.gameevent"),this.messenger._postMessage(["log.gameapi.gameevent.emit",{origin:"slave",evt:e},null],null,"log")):this.IS_MASTER||this.messenger._postMessage(["log.gameapi.gameevent.emit",{origin:"slave"},null],null,"log")},i.prototype.init=function(e){e=e||{},this.data=e.data||this.data;var t=this.data&&this.data.game&&this.data.game.applicationId?this.data.game.applicationId:null,i=new Date,e=window.location.hostname;this.data&&this.data.portal?(this.isGamestate=this.data.portal.gamestate||!1,this.data.portal.siteId?this.siteId=this.data.portal.siteId:this.siteId=null,this.data.portal.channelId?this.channelId=this.data.portal.channelId:this.channelId=null):(this.siteId=null,this.channelId=null),this.data&&this.data.apiData&&this.data.apiData.gameAPIUserId?this.gameAPIUserId=this.data.apiData.gameAPIUserId:this.gameAPIUserId=null,this.sessionId=Math.floor(999999*Math.random()),this.configureInternalTracking(t,i,e),this.isGamestate||(this.IS_SLAVE||this.IS_STANDALONE||v.isWrapped())&&this.startInternalTracking()},i.prototype._createEventObject=function(e,t,i){return{eventCategory:e,eventAction:t,properties:i}},i.prototype._sendSETEvent=function(e,t,i){return this.IS_STANDALONE?0:this.messenger&&this.messenger.post("tracker.event."+e,t,i),t},i.prototype.trackGamePlay=function(e){if(!this.gamePlayTracking.started)return!1;var t=this.gamePlayTracking.appid,i=this.gamePlayTracking.timestamp,a=this.gamePlayTracking.host,s=this._createEventObject("game","gameplay",{applicationId:t,apiuid:String(this.gameAPIUserId),apisid:String(this.sessionId),start:i,host:a}),n=this.data.isLocal,r=!0,o=0,i=0;this.siteId&&(o=parseInt(this.siteId,10)),this.channelId&&(i=parseInt(this.channelId,10)),this.data&&this.data.branding&&this.data.branding.logo&&this.data.branding.logo.image&&(r=!1);r=this._createEventObject("gameapi","load",{siteid:o,appid:t,channelid:i,apiuid:String(this.gameAPIUserId),apisid:String(this.sessionId),domainname:a,isstandalone:this.IS_STANDALONE,isfallbackconfig:n,iswhitelisted:r});return this._sendSETEvent("express",s,e),this._sendSETEvent("express",r,function(){}),s},i.prototype.trackTimeInGame=function(e){if(!this.timeInGameTracking.started)return!1;var t=this.timeInGameTracking.appid,i=this.timeInGameTracking.timestamp,i=this._createEventObject("game","heartbeat",{applicationId:t,apiuid:String(this.gameAPIUserId),apisid:String(this.sessionId),start:i});return this._sendSETEvent("express",i,e),i},i.prototype.trackGameAPIEvent=function(e,t){(t=t||{}).appid=this.gamePlayTracking.appid,t.domainname=this.gamePlayTracking.host,t.siteid=parseInt(this.siteId,10),t.channelid=parseInt(this.channelId,10);t=this._createEventObject("gameapi",e,t);this._sendSETEvent("express",t,function(){})},i.prototype.configureInternalTracking=function(e,t,i){return e?(this.gamePlayTracking.appid=e,this.gamePlayTracking.timestamp=Date.parse(t),this.gamePlayTracking.host=i,this.timeInGameTracking.appid=e,void(this.timeInGameTracking.timestamp=Date.parse(t))):{error:"No application ID defined for this game"}},i.prototype.startInternalTracking=function(){function e(e){if(!e)throw"Could not save the time in game"}var t=this;return this.moduleReady?this.gamePlayTracking.appid?(this.gamePlayTracking.started=!0,this.timeInGameTracking.started=!0,this.trackGamePlay(function(e){if(!e)throw"Could not save the game play"}),this.trackTimeInGame(e),setInterval(function(){t.trackTimeInGame(e)},6e4),this.gamePlayTracking.started&&this.timeInGameTracking.started):{error:"No application ID defined for this game"}:{error:"This method cannot be called before the API is loaded"}},a.prototype.init=function(e){e=e||{},this.data=e.data||this.data,this.data&&this.data.portal&&this.data.portal.siteId&&187!==this.data.portal.siteId&&(this.data.portal.siteId&&this.data.branding&&this.data.branding.more_games&&this.data.branding.more_games.handler&&"moreGames"!==this.data.branding.more_games.handler&&(this.data.branding.more_games.handler="moreGames"))},a.prototype.getLogo=function(e){if(!this.moduleReady)return{error:"This method cannot be called before the API is loaded"};var t=this.IS_MASTER?"master":"slave";this.messenger._postMessage(["log.branding.getlogo",{origin:t},null],null,"log");t=this._getLink("logo");return e&&"object"==typeof e&&((e=v.validateSchema({type:{type:"String",values:["png"]},width:"Number",height:"Number"},e)).error&&(t.error=e.error)),t},a.prototype.getLink=function(e){if(!e)return{error:"No link identifier provided"};if(-1===this.listLinks().indexOf(e))return{error:"Invalid option: '"+e+"'",action:function(){}};var t=this.IS_MASTER?"master":"slave";return this.messenger._postMessage(["log.branding.getlink",{origin:t,linkName:e},null],null,"log"),this._getLink(e)},a.prototype._getLink=function(e){if(!e)return{error:"No link identifier provided"};var t=this.data&&this.data.branding?this.data.branding:{};return t&&t[e]?{linkName:e,image:t[e].image||!1,action:this._executeHandler.bind(this,e)}:{error:"Invalid option: '"+e+"'",action:function(){}}},a.prototype._getGMLink=function(e){if(!e)return{error:"No link identifier provided"};var t=this.data&&this.data.branding?this.data.branding:{};return t&&t[e]?{linkName:e,url:this._tagUrl(t[e].url,e)}:{error:"Invalid option: '"+e+"'",url:null}},a.prototype.getLinks=function(){var e={},t=this.listLinks();if(0===t.length)e={more_games:{action:function(){}}};else for(var i=0;i<t.length;i++){var a=t[i];e[a]=this._getLink(a)}return e},a.prototype._executeHandler=function(e){var t=this.data&&this.data.branding?this.data.branding:{},i=t[e],a=i.handler,s=this._tagUrl(i.url,e),t=this._getBrandName(t);if(i.url&&0<i.url.length&&a&&this.components[a]){i=this.IS_MASTER?"master":"slave";return this.messenger._postMessage(["log.branding.linkAction",{origin:i,linkName:e},null],null,"log"),this.components[a]({url:s,messenger:this.messenger,isStandalone:this.IS_STANDALONE,brandName:t})}return function(){}},a.prototype._getBrandName=function(e){},a.prototype.listLinks=function(){var t=this.data&&this.data.branding?this.data.branding:{};return Object.keys(t).filter(function(e){return!t[e].blacklisted})},a.prototype.getSplashScreen=function(){var e=this.IS_MASTER?"master":"slave",t=this.data&&this.data.branding&&this.data.branding.splash_screen?(t=!0,this.data.branding.splash_screen.image||this.data.branding.splash_screen.url||(t=!1),{show:t,action:this._getLink("splash_screen").action||function(){}}):{show:!0,action:function(){}};return this.messenger._postMessage(["log.branding.splashScreen",{origin:e},null],null,"log"),t},a.prototype.displaySplashScreen=function(e){if("function"!=typeof e)throw new Error("argument  passed to displaySplashScreen method should be a function");var t=this.IS_MASTER?"master":"slave",i=this._getLink("logo").image;i&&this.getSplashScreen().show?("master"!=t&&this.messenger._postMessage(["log.branding.displaySplashScreen",{origin:t},null],null,"log"),this.components.displayOnTop({url:i,action:this.getSplashScreen().action,callback:e})):e()},a.prototype._tagUrl=function(e,t){return e},y.prototype.encode=function(){return["gameapi",this.type,this.callbackId,this.data?JSON.stringify(this.data):""].join("|")},s.prototype._postMessage=function(e,t,i){for(var a=new y({type:i||"jslib",callbackId:v.isArray(e)&&"function"==typeof e[e.length-1]?this._callbacks.push(e.pop())-1:t,data:e}).encode(),s=0;s<this._targets.length;s++)this._targets[s].postMessage(a,"*")},s.prototype._callJSLib=function(){SpilGames.apply(SpilGames,v.argsToArray(arguments))},s.prototype._setupEventListener=function(){window.addEventListener?window.addEventListener("message",this._handleMessage.bind(this),!1):window.attachEvent&&window.attachEvent("onmessage",this._handleMessage.bind(this))},s.prototype._handleMessage=function(e){var t,i,a,s=this,n=new y(e.data);if(n)if(t=n.type,i=n.callbackId,a=n.data,n=this._callbacks[i]||!1,this.IS_MASTER)switch(t){case"jslib":"Array"===a.constructor.name?a.push(function(e){s._postMessage(e,i)}):"string"==typeof a&&(a=JSON.parse(a)),this._callJSLib.apply(this,a);break;case"ugapi":this._handleUGARequest(e);break;case"datachange":this._postMessage(a,null,"datachange");break;default:this.publish(t,a)}else this.IS_SLAVE&&("function"==typeof n?(delete this._callbacks[i],n(a)):"datachange"===t||"jslib"!==t&&this.publish(t,a));return!1},s.prototype._handleUGARequest=function(e){var t,i=new y(e.data);if(i)switch(e=i.data[0],t=i.callbackId,i.data[1],e){case"GameAPI.data":this._postMessage(this.dataStore._getCache(),t,"ugapi");break;case"GameAPI.isReady":this._postMessage({isready:this.api.isReady},t,"ugapi")}},s.prototype.post=function(){var e=v.argsToArray(arguments);return this.IS_SLAVE?this._postMessage(e):this._callJSLib.apply(this,e),this},s.prototype.publish=function(e,t){return this._channels[e]&&this._channels[e].forEach(function(e){try{e.fn.call(e.ctx,t)}catch(e){}}),this},s.prototype.subscribe=function(e,t,i){if("function"!=typeof t)throw new Error("Callback has to be a function");if("string"!=typeof e)throw new Error("Channel name has to be a string");return this._channels[e]||(this._channels[e]=[]),this._channels[e].push({fn:t,ctx:i}),this},s.prototype.unsubscribe=function(e,t){return this._channels[e]&&"function"==typeof t&&(this._channels[e]=this._channels[e].filter(function(e){return e.fn!==t})),this},s.prototype.subscribeOnce=function(i,a,e){var s=this;return this.subscribe(i,function e(t){s.unsubscribe(i,e),a.call(this,t)},e)},s.prototype.requestFromParent=function(e,t,i){if(!this.IS_SLAVE)throw"You are the parent, stop talking to yourself";t=t||{},this._postMessage([e,t,i],null,"ugapi")},S.prototype._addBasic=function(e,t){t=t||{};return t.isMaster=this.IS_MASTER,t.isStandalone=this.IS_STANDALONE,t.messenger=this.__.messenger,t.data=null,t},S.prototype._addEventTracking=function(e){e=e||{};return e.eventTracking=this.__.EventTracking,e},S.prototype._addComponents=function(e){e=e||{};return e.components=this.__.components,e},S.prototype._addInitialHeight=function(e){e=e||{};return e.initialHeight=window.outerHeight-window.innerHeight,e},S.prototype._addAppToken=function(e){e=e||{};return e.appToken=this.AppToken,e},S.prototype._setRole=function(){var e=v.getRole(window);this.IS_MASTER=e.IS_MASTER,this.IS_SLAVE=e.IS_SLAVE,this.IS_STANDALONE=e.IS_STANDALONE},S.prototype._getTargets=function(){if(this.IS_STANDALONE)return[window];if(this.IS_MASTER){for(var e,t=["iframegame","iframeGameState"],i=[],a=0;a<t.length;a++)(e=document.getElementById(t[a]))&&e.contentWindow&&i.push(e.contentWindow);return i}return[window.parent]},S.prototype.loadAPI=function(s,e){function t(e){l.IS_MASTER?e=n(e):e&&e.user&&e.user.userId&&A.__.user.setUserId(e.user.userId);var t=e.portal&&e.portal.gamestate||!1,i=e.game&&e.game.properties&&e.game.properties.highscore||!1,a=e.game&&e.game.properties&&e.game.properties.award||!1;return l.isReady=!0,l.Branding.moduleReady=!0,l.__.EventTracking.moduleReady=!0,l.GameState.moduleReady=!0,l.GameBreak.moduleReady=!0,l.Game.moduleReady=!0,l.Score.moduleReady=!0,l.Award.moduleReady=!0,l.Secondscreen.moduleReady=!0,l.User.moduleReady=!0,l.Friends.moduleReady=!0,l.GameEvent.moduleReady=!0,l.Localization.moduleReady=!0,l.AppToken.moduleReady=!0,(t||i||a)&&l.AppToken.init({data:e}),l.__.EventTracking.init({data:e}),t&&l.GameState.init({data:e}),t||(l.Branding.init({data:e}),l.Game.init({data:e}),l.Score.init({data:e}),l.Award.init({data:e}),l.GameBreak.init({data:e}),l.Friends.init({data:e}),l.User.init({data:e}),l.Localization.init({data:e})),l.__.messenger._postMessage(["log.gameapi.loadapi.finish",{origin:d,version:l.version},null],null,"log"),s(l)}function n(e){var t=e.game||{},i=e.apiData||{},a=e.user||{},s=e.portal||{},n=e.branding||{},e=e.localization||{};return A.getLocalConfig({game:t,apiData:i,user:a,portal:s,branding:n,localization:e})}function i(){l.__.messenger.requestFromParent("GameAPI.data",{},function(e){t(e)})}function a(){l.IS_STANDALONE=!0,l.IS_MASTER=!0,l.IS_SLAVE=!0,l.__.dataStore=new h({isMaster:!0}),e=e||null,A.setupStandaloneMode(e,function(e){l.__.dataStore._setCache(n(e)),t(e)})}function r(e){e&&!e.isError?l.__.dataStore._setCache(n(e)):v.log("GameAPI gameConfig error: ",e.isError),t(e)}var o,l=this,d=this.IS_MASTER?"master":"slave",p=0;if(void 0!==e&&void 0!==e.id&&"576742227280293562"===e.id&&(window.onkeydown=null),"function"!=typeof s)throw new Error("argument passed to loadAPI method should be a function");return!0===this.isReady?(v.log("WARNING: Detected multiple executions of GameAPI.loadAPI(). This method should only be executed once per page load!"),s(l)):(this.__.messenger._postMessage(["log.gameapi.loadapi.start",{origin:d,version:l.version,spildata:e},null],null,"log"),void(this.IS_STANDALONE?a():this.IS_MASTER?A.getGameConfig(function(e){A.getBrandingConfig(e,r)}):e&&e.gamestate?t(A.configFromData(e)):(o=setTimeout(a,600),function t(){l.__.messenger.requestFromParent("GameAPI.isReady",{},function(e){o&&clearTimeout(o),e.isready?i():p<5?(p++,setTimeout(t,500)):(v.log("GameAPI:checkMasterReady not ready but reached max wait"),i())})}())))};var b=new S(h,s,a,i,t);"function"==typeof define&&define.amd&&define("GameAPI",b),e.GameAPI=b}(window),function(){"use strict";function n(e){e&&(e.setTargetValueAtTime||(e.setTargetValueAtTime=e.setTargetAtTime))}/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&window.hasOwnProperty&&window.hasOwnProperty("AudioContext")&&(window.webkitAudioContext=AudioContext,AudioContext.prototype.hasOwnProperty("internal_createGain")||(AudioContext.prototype.internal_createGain=AudioContext.prototype.createGain,AudioContext.prototype.createGain=function(){var e=this.internal_createGain();return n(e.gain),e}),AudioContext.prototype.hasOwnProperty("internal_createDelay")||(AudioContext.prototype.internal_createDelay=AudioContext.prototype.createDelay,AudioContext.prototype.createDelay=function(){var e=this.internal_createDelay();return n(e.delayTime),e}),AudioContext.prototype.hasOwnProperty("internal_createBufferSource")||(AudioContext.prototype.internal_createBufferSource=AudioContext.prototype.createBufferSource,AudioContext.prototype.createBufferSource=function(){var e=this.internal_createBufferSource();return e.noteOn||(e.noteOn=e.start),e.noteGrainOn||(e.noteGrainOn=e.start),e.noteOff||(e.noteOff=e.stop),n(e.playbackRate),e}),AudioContext.prototype.hasOwnProperty("internal_createDynamicsCompressor")||(AudioContext.prototype.internal_createDynamicsCompressor=AudioContext.prototype.createDynamicsCompressor,AudioContext.prototype.createDynamicsCompressor=function(){var e=this.internal_createDynamicsCompressor();return n(e.threshold),n(e.knee),n(e.ratio),n(e.reduction),n(e.attack),n(e.release),e}),AudioContext.prototype.hasOwnProperty("internal_createBiquadFilter")||(AudioContext.prototype.internal_createBiquadFilter=AudioContext.prototype.createBiquadFilter,AudioContext.prototype.createBiquadFilter=function(){var e=this.internal_createBiquadFilter();n(e.frequency),n(e.detune),n(e.Q),n(e.gain);for(var t=["LOWPASS","HIGHPASS","BANDPASS","LOWSHELF","HIGHSHELF","PEAKING","NOTCH","ALLPASS"],i=0;i<t.length;++i){var a=t[i],s=a.toLowerCase();e.hasOwnProperty(a)||(e[a]=s)}return e}),AudioContext.prototype.hasOwnProperty("internal_createOscillator")||AudioContext.prototype.hasOwnProperty("createOscillator")&&(AudioContext.prototype.internal_createOscillator=AudioContext.prototype.createOscillator,AudioContext.prototype.createOscillator=function(){var e=this.internal_createOscillator();e.noteOn||(e.noteOn=e.start),e.noteOff||(e.noteOff=e.stop),n(e.frequency),n(e.detune);for(var t=["SINE","SQUARE","SAWTOOTH","TRIANGLE","CUSTOM"],i=0;i<t.length;++i){var a=t[i],s=a.toLowerCase();e.hasOwnProperty(a)||(e[a]=s)}return e.hasOwnProperty("setWaveTable")||(e.setWaveTable=e.setPeriodicTable),e}),AudioContext.prototype.hasOwnProperty("internal_createPanner")||(AudioContext.prototype.internal_createPanner=AudioContext.prototype.createPanner,AudioContext.prototype.createPanner=function(){var e,t=this.internal_createPanner(),i={EQUALPOWER:"equalpower",HRTF:"HRTF",LINEAR_DISTANCE:"linear",INVERSE_DISTANCE:"inverse",EXPONENTIAL_DISTANCE:"exponential"};for(e in i){var a=i[e];t.hasOwnProperty(e)||(t[e]=a)}return t}),AudioContext.prototype.hasOwnProperty("createGainNode")||(AudioContext.prototype.createGainNode=AudioContext.prototype.createGain),AudioContext.prototype.hasOwnProperty("createDelayNode")||(AudioContext.prototype.createDelayNode=AudioContext.prototype.createDelay),AudioContext.prototype.hasOwnProperty("createJavaScriptNode")||(AudioContext.prototype.createJavaScriptNode=AudioContext.prototype.createScriptProcessor),AudioContext.prototype.hasOwnProperty("createWaveTable")||(AudioContext.prototype.createWaveTable=AudioContext.prototype.createPeriodicWave))}();
